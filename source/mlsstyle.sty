% This file is a temporary solution, containing copies of parts of the
% preample.tex used by the mls.tex document.

\usepackage{listings}

\lstdefinelanguage{modelica}{% Language for use with the lstlisting environment.
    basicstyle=\upshape\small\ttfamily,        % Font size for displayed code listings.
    alsoletter={...},%
    %otherkeywords={-, =, +, [, ], (, ), \{, \}, :, *, !},%
    morekeywords=[1]{},% blue Keywords
    morekeywords=[2]{% blue + bold keywords
        annotation,assert,block,break,class,connector,constant,constrainedby,discrete,%
        each,encapsulated,else,elseif,elsewhen,end,exit,expandable,extends,external,final,flow,for,%
        function,if,in,inner,initial,input,import,loop,model,nondiscrete,operator,outer,%
        output,package,parameter,partial,record,redeclare,replaceable,return,%
        size,stream,terminate,then,type,when,while,algorithm,equation,%
        protected,public,and,false,not,or,true,pure,impure,transition,initialState},%
    % Note: initial is in both variants - depending on context, use first variant
    morekeywords=[3]{% red keywords - only special functions and classes: 3.7.2 #derivative-and-special-purpose-operators-with-function-syntax
    % 3.7.3 #event-related-operators-with-function-syntax (except initial) and 4.8 #predefined-types-and-classes
        connect,der,delay,cardinality,homotopy,semiLinear,inStream,actualStream,spatialDistribution,getInstanceName%
        terminal,noEvent,smooth,sample,pre,edge,change,reinit,%
        Real,Integer,Boolean,String},%
    comment=[l]{//}, % comment lines
    morecomment=[s]{/*}{*/}, % comment blocs
    morestring=[b]{'}, %
    morestring=[b]{"},
}[keywords,comments,strings]

\lstdefinelanguage[short]{modelica}[]{modelica}{% Language for use with the \lstinline command.
    basicstyle=\upshape\ttfamily,              % Font size for inline code snippets.
}

\lstset{ %
  backgroundcolor=\color{white},   % choose the background color
  mathescape=true,
  breaklines=true,                 % automatic line breaking only at whitespace
  keepspaces,                      % don't remove space such as those after closing parenthesis
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color[rgb]{0,0.4,0}\sffamily,    % comment style
  keywordstyle=\color{blue}\ttfamily\bfseries,       % keyword style
  keywordstyle=[1]\color{keywordcolor1},
  keywordstyle=[2]\color{keywordcolor1}\bfseries,
  keywordstyle=[3]\color{keywordcolor2},
  stringstyle=\color{black},     % string literal style
  language=[short]modelica,     % Language that will be used by default, in particluar by plain \lstinline.
  showstringspaces=false,
  frame=lrtb, %
  xleftmargin=\fboxsep, %
  xrightmargin=-\fboxsep, %
  belowskip=0pt, %
}
